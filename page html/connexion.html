<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Connexion</title>
     <link rel="stylesheet" href="../page css/connexion.css">
</head>
<body>
     <div class="conteneur">
          <div class="conteneur_left">
               <div class="conteneur_img">
                    <img src="../image/Mobile login-pana (1).png" alt="connexion" class="img">
               </div>
          </div>
          <div class="conteneur_right">
               <h1 class="title">Bienvenue sur Bakéli-tontine</h1>
               <div class="conteneur_form">
                    <form action="" class="login" id="login">
                         <h2>Connectez-vous</h1>
                              <p>Connectez-vous et gérez vos cotisation</p>
                              <div class="conteneur_input">
                                   <input type="email" name="email" id="email" placeholder="Email">
                              </div>
     
                              <div class="conteneur_input"> 
                                   <input type="password" name="password" id="password" placeholder="Mot de pass">
                              </div>
                              <a href="" class="oublie">Mot de pass oublie ?</a>
                              <button type="submit" class="connexion">Connexion</button>
                              <p class="inscription_para">
                                   Si vous avez pas compte , <a href="./inscription.html">inscriver-vous</a>
                              </p>
                    </form>
               </div>
          </div>
     </div>

     <!-- ====================================== Connexion =================================================================== -->

     <script type="module">
         
          import { initializeApp } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";
          import { getAuth , signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-auth.js";
          
          const firebaseConfig = {
            apiKey: "AIzaSyCvTxrF9KapxjinmFpFr9T07wsglr7l-9U",
            authDomain: "projet-javascript-46aba.firebaseapp.com",
            projectId: "projet-javascript-46aba",
            storageBucket: "projet-javascript-46aba.appspot.com",
            messagingSenderId: "45084340261",
            appId: "1:45084340261:web:419c721021c89204774fcc",
            measurementId: "G-QHG959LNVL"
          };
        
          // Initialize Firebase
          const app = initializeApp(firebaseConfig);
          const auth = getAuth();
          
          const login = document.getElementById('login')
          login.addEventListener('submit', (e) => {
               e.preventDefault(); 
               const email = document.getElementById('email').value
               const password = document.getElementById('password').value

               signInWithEmailAndPassword(auth, email,password)
               .then((userCredential) => {
                    // Signed in 
                    const user = userCredential.user;
                    location.href = "dashbord.html"
                    login.reset()
                    // ...
               })
               .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    alert('Ce compte n\'existe pas ' )
               });
          })
          
          
     </script>

     <!-- =========================================== end connexion -->
</body>
</html>